<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏïÑÍ∏∞ Îã®Ïñ¥Ïπ¥Îìú</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        /* Î©îÏù∏ Î©îÎâ¥ ÌôîÎ©¥ */
        .menu-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
        }

        .menu-title {
            color: #ff6b6b;
            font-size: 3rem;
            margin-bottom: 50px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            max-width: 600px;
        }

        .category-card {
            background: white;
            border-radius: 25px;
            padding: 40px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .category-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .category-card:active {
            transform: scale(0.95);
        }

        .category-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .category-name {
            font-size: 1.8rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .category-count {
            font-size: 1rem;
            color: #666;
        }

        /* Ïä¨ÎùºÏù¥ÎìúÏáº ÌôîÎ©¥ */
        .slideshow-screen {
            display: none;
            position: relative;
            height: 100vh;
            background: #000;
        }

        .slide {
            display: none;
            height: 100vh;
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .slide-image {
            max-width: 70%;
            max-height: 60%;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            object-fit: cover;
            margin-bottom: 30px;
        }

        .slide-text {
            background: rgba(255,255,255,0.95);
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 3rem;
            font-weight: bold;
            color: #333;
            text-shadow: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .slide-english {
            background: rgba(255,255,255,0.8);
            padding: 10px 25px;
            border-radius: 25px;
            font-size: 1.5rem;
            color: #666;
            margin-top: 15px;
            font-style: italic;
        }

        .controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        .control-btn {
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .control-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .control-btn:active {
            transform: scale(0.9);
        }

        .progress-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 5px;
            background: #4ecdc4;
            transition: width 0.1s ease;
            z-index: 100;
        }

        .slide-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2rem;
            z-index: 100;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            .menu-title {
                font-size: 2rem;
                margin-bottom: 30px;
            }

            .category-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                max-width: 300px;
            }

            .category-card {
                padding: 30px 20px;
                min-height: 150px;
            }

            .category-icon {
                font-size: 3rem;
            }

            .category-name {
                font-size: 1.5rem;
            }

            .slide-image {
                max-width: 85%;
                max-height: 50%;
            }

            .slide-text {
                font-size: 2rem;
                padding: 15px 30px;
            }

            .slide-english {
                font-size: 1.2rem;
                padding: 8px 20px;
            }
        }
    </style>
    <!-- PWA: iOS ÌôàÌôîÎ©¥ Ïï± ÏïÑÏù¥ÏΩò Î∞è ÏÑ§Ï†ï -->
    <link rel="apple-touch-icon" href="<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Apple</title><path d="M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"/></svg>">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ÏïÑÍ∏∞ Îã®Ïñ¥Ïπ¥Îìú">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Î©îÎâ¥ ÌôîÎ©¥ -->
    <div class="menu-screen" id="menuScreen">
        <h1 class="menu-title">üéà ÏïÑÍ∏∞ Îã®Ïñ¥Ïπ¥Îìú üéà</h1>
        
        <div class="category-grid">
            <div class="category-card" data-category="animals">
                <div class="category-icon">üê∂</div>
                <div class="category-name">ÎèôÎ¨º</div>
                <div class="category-count">50Í∞ÄÏßÄ ÎèôÎ¨ºÎì§</div>
            </div>
            
            <div class="category-card" data-category="fruits">
                <div class="category-icon">üçé</div>
                <div class="category-name">Í≥ºÏùº</div>
                <div class="category-count">50Í∞ÄÏßÄ Í≥ºÏùºÎì§</div>
            </div>
            
            <div class="category-card" data-category="objects">
                <div class="category-icon">üöó</div>
                <div class="category-name">ÏÇ¨Î¨º</div>
                <div class="category-count">50Í∞ÄÏßÄ ÏÇ¨Î¨ºÎì§</div>
            </div>
            
            <div class="category-card" data-category="vehicles">
                <div class="category-icon">üöÇ</div>
                <div class="category-name">ÍµêÌÜµÏàòÎã®</div>
                <div class="category-count">50Í∞ÄÏßÄ ÍµêÌÜµÏàòÎã®</div>
            </div>
        </div>
    </div>

    <!-- Ïä¨ÎùºÏù¥ÎìúÏáº ÌôîÎ©¥ -->
    <div class="slideshow-screen" id="slideshowScreen">
        <button class="back-btn" id="backBtn">‚Üê</button>
        <div class="progress-bar" id="progressBar"></div>
        <div class="slide-counter" id="slideCounter">1 / 50</div>
        
        <div id="slidesContainer">
            <!-- Ïä¨ÎùºÏù¥ÎìúÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
        </div>

        <div class="controls">
            <button class="control-btn" id="prevBtn">‚èÆ</button>
            <button class="control-btn" id="playPauseBtn">‚è∏</button>
            <button class="control-btn" id="nextBtn">‚è≠</button>
        </div>
    </div>

    <script>

        if ('serviceWorker' in navigator) {
             navigator.serviceWorker.register('service-worker.js');
         }
        // Í∞Å Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Ìï≠Î™© Îç∞Ïù¥ÌÑ∞ (baby_flashcard_objects.md Í∏∞Î∞ò)
        const cardData = {
            animals: [
                { korean: 'Í∞ïÏïÑÏßÄ', english: '', image: '' },
                { korean: 'Í≥†ÏñëÏù¥', english: '', image: '' },
                { korean: 'ÌÜ†ÎÅº', english: '', image: '' },
                { korean: 'Í≥∞', english: '', image: '' },
                { korean: 'ÏÇ¨Ïûê', english: '', image: '' },
                { korean: 'Ìò∏ÎûëÏù¥', english: '', image: '' },
                { korean: 'ÏΩîÎÅºÎ¶¨', english: '', image: '' },
                { korean: 'Í∏∞Î¶∞', english: '', image: '' },
                { korean: 'ÏõêÏà≠Ïù¥', english: '', image: '' },
                { korean: 'ÌåêÎã§', english: '', image: '' },
                { korean: 'Îßê', english: '', image: '' },
                { korean: 'ÏÜå', english: '', image: '' },
                { korean: 'ÎèºÏßÄ', english: '', image: '' },
                { korean: 'Ïñë', english: '', image: '' },
                { korean: 'ÏóºÏÜå', english: '', image: '' },
                { korean: 'Îã≠', english: '', image: '' },
                { korean: 'Ïò§Î¶¨', english: '', image: '' },
                { korean: 'Í±∞ÏúÑ', english: '', image: '' },
                { korean: 'ÏÉà', english: '', image: '' },
                { korean: 'Î¨ºÍ≥†Í∏∞', english: '', image: '' },
                { korean: 'Í∞úÍµ¨Î¶¨', english: '', image: '' },
                { korean: 'Í±∞Î∂ÅÏù¥', english: '', image: '' },
                { korean: 'Î±Ä', english: '', image: '' },
                { korean: 'ÎÇòÎπÑ', english: '', image: '' },
                { korean: 'Î≤å', english: '', image: '' },
                { korean: 'Í∞úÎØ∏', english: '', image: '' },
                { korean: 'Î¨¥ÎãπÎ≤åÎ†à', english: '', image: '' },
                { korean: 'Í±∞ÎØ∏', english: '', image: '' },
                { korean: 'Ï•ê', english: '', image: '' },
                { korean: 'Îã§ÎûåÏ•ê', english: '', image: '' },
                { korean: 'Ïó¨Ïö∞', english: '', image: '' },
                { korean: 'ÎäëÎåÄ', english: '', image: '' },
                { korean: 'ÏÇ¨Ïä¥', english: '', image: '' },
                { korean: 'ÏñºÎ£©Îßê', english: '', image: '' },
                { korean: 'ÌïòÎßà', english: '', image: '' },
                { korean: 'ÏïÖÏñ¥', english: '', image: '' },
                { korean: 'Ìé≠Í∑Ñ', english: '', image: '' },
                { korean: 'Í≥†Îûò', english: '', image: '' },
                { korean: 'ÏÉÅÏñ¥', english: '', image: '' },
                { korean: 'Î¨∏Ïñ¥', english: '', image: '' },
                { korean: 'Í≤å', english: '', image: '' },
                { korean: 'Îã¨ÌåΩÏù¥', english: '', image: '' },
                { korean: 'ÏßÄÎ†ÅÏù¥', english: '' , image: '' },
                { korean: 'Î©îÎöúÍ∏∞', english: '', image: '' },
                { korean: 'Ïû†ÏûêÎ¶¨', english: '', image: '' },
                { korean: 'Î™®Í∏∞', english: '', image: '' },
                { korean: 'ÌååÎ¶¨', english: '', image: '' },
                { korean: 'Îß§ÎØ∏', english: '', image: '' },
                { korean: 'ÍøÄÎ≤å', english: '', image: '' },
                { korean: 'Ïï†Î≤åÎ†à', english: '', image: '' }
            ],
            fruits: [
                { korean: 'ÏÇ¨Í≥º', english: '', image: '' },
                { korean: 'Î∞îÎÇòÎÇò', english: '', image: '' },
                { korean: 'Ïò§Î†åÏßÄ', english: '', image: '' },
                { korean: 'Ìè¨ÎèÑ', english: '', image: '' },
                { korean: 'Îî∏Í∏∞', english: '', image: '' },
                { korean: 'Î∞∞', english: '', image: '' },
                { korean: 'Î≥µÏà≠ÏïÑ', english: '', image: '' },
                { korean: 'Ï≤¥Î¶¨', english: '', image: '' },
                { korean: 'ÏàòÎ∞ï', english: '', image: '' },
                { korean: 'Ï∞∏Ïô∏', english: '', image: '' },
                { korean: 'ÎãπÍ∑º', english: '', image: '' },
                { korean: 'ÏñëÌåå', english: '', image: '' },
                { korean: 'Í∞êÏûê', english: '', image: '' },
                { korean: 'Í≥†Íµ¨Îßà', english: '', image: '' },
                { korean: 'Î¨¥', english: '', image: '' },
                { korean: 'Î∞∞Ï∂î', english: '', image: '' },
                { korean: 'ÏÉÅÏ∂î', english: '', image: '' },
                { korean: 'ÌÜ†ÎßàÌÜ†', english: '', image: '' },
                { korean: 'Ïò§Ïù¥', english: '', image: '' },
                { korean: 'Î∏åÎ°úÏΩúÎ¶¨', english: '', image: '' },
                { korean: 'Ïò•ÏàòÏàò', english: '', image: '' },
                { korean: 'ÏΩ©', english: '', image: '' },
                { korean: 'Î∞•', english: '', image: '' },
                { korean: 'Îπµ', english: '', image: '' },
                { korean: 'Ïö∞Ïú†', english: '', image: '' },
                { korean: 'Îã¨Í±Ä', english: '', image: '' },
                { korean: 'ÏπòÏ¶à', english: '', image: '' },
                { korean: 'ÏöîÍµ¨Î•¥Ìä∏', english: '', image: '' },
                { korean: 'ÏïÑÏù¥Ïä§ÌÅ¨Î¶º', english: '', image: '' },
                { korean: 'ÏºÄÏù¥ÌÅ¨', english: '', image: '' },
                { korean: 'Ïø†ÌÇ§', english: '', image: '' },
                { korean: 'ÏÇ¨ÌÉï', english: '', image: '' },
                { korean: 'Ï¥àÏΩúÎ¶ø', english: '', image: '' },
                { korean: 'Î∞îÎÇòÎÇòÏö∞Ïú†', english: '', image: '' },
                { korean: 'Ï£ºÏä§', english: '', image: '' },
                { korean: 'Î¨º', english: '', image: '' },
                { korean: 'Ï∞®', english: '', image: '' },
                { korean: 'Ïª§Ìîº', english: '', image: '' },
                { korean: 'ÎùºÎ©¥', english: '', image: '' },
                { korean: 'ÍπÄÎ∞•', english: '', image: '' },
                { korean: 'ÌñÑÎ≤ÑÍ±∞', english: '', image: '' },
                { korean: 'ÌîºÏûê', english: '', image: '' },
                { korean: 'ÏπòÌÇ®', english: '', image: '' },
                { korean: 'ÏÉùÏÑ†', english: '', image: '' },
                { korean: 'Í≥†Í∏∞', english: '', image: '' },
                { korean: 'ÍπÄÏπò', english: '', image: '' },
                { korean: 'Í≥ºÏûê', english: '', image: '' },
                { korean: 'Ï†§Î¶¨', english: '', image: '' },
                { korean: 'ÎèÑÎÑõ', english: '', image: '' },
                { korean: 'ÌåùÏΩò', english: '', image: '' },
                { korean: 'Í≤¨Í≥ºÎ•ò', english: '', image: '' },
                { korean: 'Í±¥Ìè¨ÎèÑ', english: '', image: '' },
                { korean: 'ÎßùÍ≥†', english: '', image: '' },
                { korean: 'ÌååÏù∏Ïï†Ìîå', english: '', image: '' },
                { korean: 'ÌÇ§ÏúÑ', english: '', image: '' },
                { korean: 'Î†àÎ™¨', english: '', image: '' },
                { korean: 'ÏûêÎ™Ω', english: '', image: '' },
                { korean: 'Î©úÎ°†', english: '', image: '' },
                { korean: 'Î∏îÎ£®Î≤†Î¶¨', english: '', image: '' },
                { korean: 'ÎùºÏ¶àÎ≤†Î¶¨', english: '', image: '' },
                { korean: 'ÏïÑÎ≥¥Ïπ¥ÎèÑ', english: '', image: '' },
                { korean: 'ÏΩîÏΩîÎÑõ', english: '', image: '' },
                { korean: 'ÎåÄÏ∂î', english: '', image: '' },
                { korean: 'Í≥∂Í∞ê', english: '', image: '' },
                { korean: 'Î∞§', english: '', image: '' },
                { korean: 'ÏùÄÌñâ', english: '', image: '' },
                { korean: 'Ìò∏Îëê', english: '', image: '' },
                { korean: 'ÎïÖÏΩ©', english: '', image: '' },
                { korean: 'ÏïÑÎ™¨Îìú', english: '', image: '' },
                { korean: 'ÌîºÏä§ÌÉÄÏπòÏò§', english: '', image: '' },
                { korean: 'ÎßàÏπ¥Î°±', english: '', image: '' },
                { korean: 'ÏôÄÌîå', english: '', image: '' },
                { korean: 'Ìå¨ÏºÄÏù¥ÌÅ¨', english: '', image: '' },
                { korean: 'ÏãúÎ¶¨Ïñº', english: '', image: '' },
                { korean: 'ÏÉêÎü¨Îìú', english: '', image: '' },
                { korean: 'Ïä§ÌååÍ≤åÌã∞', english: '', image: '' },
                { korean: 'ÎßåÎëê', english: '', image: '' },
                { korean: 'Îñ°', english: '', image: '' },
                { korean: 'ÌïúÍ≥º', english: '', image: '' },
                { korean: 'Ï†ìÍ∞ÄÎùΩ', english: '', image: '' }
            ],
            objects: [
                { korean: 'ÏûêÎèôÏ∞®', english: '', image: '' },
                { korean: 'Í≥µ', english: '', image: '' },
                { korean: 'Ï±Ö', english: '', image: '' },
                { korean: 'Ïã†Î∞ú', english: '', image: '' },
                { korean: 'Î™®Ïûê', english: '', image: '' },
                { korean: 'Ïªµ', english: '', image: '' },
                { korean: 'ÏùòÏûê', english: '', image: '' },
                { korean: 'ÌÖåÏù¥Î∏î', english: '', image: '' },
                { korean: 'Ïπ®ÎåÄ', english: '', image: '' },
                { korean: 'Î¨∏', english: '', image: '' },
                { korean: 'Ï∞ΩÎ¨∏', english: '', image: '' },
                { korean: 'ÏãúÍ≥Ñ', english: '', image: '' },
                { korean: 'Ï†ÑÌôîÍ∏∞', english: '', image: '' },
                { korean: 'Ïª¥Ìì®ÌÑ∞', english: '', image: '' },
                { korean: 'Í∞ÄÎ∞©', english: '', image: '' }
            ],
            vehicles: [
                { korean: 'Í∏∞Ï∞®', english: '', image: '' },
                { korean: 'ÎπÑÌñâÍ∏∞', english: '', image: '' },
                { korean: 'Î∞∞', english: '', image: '' },
                { korean: 'Î≤ÑÏä§', english: '', image: '' },
                { korean: 'ÌÉùÏãú', english: '', image: '' },
                { korean: 'Ìä∏Îü≠', english: '', image: '' },
                { korean: 'Ïò§ÌÜ†Î∞îÏù¥', english: '', image: '' },
                { korean: 'ÏûêÏ†ÑÍ±∞', english: '', image: '' },
                { korean: 'Ìó¨Î¶¨ÏΩ•ÌÑ∞', english: '', image: '' },
                { korean: 'ÏßÄÌïòÏ≤†', english: '', image: '' },
                { korean: 'Ïä§Ïø†ÌÑ∞', english: '', image: '' },
                { korean: 'Î°§Îü¨Ïä§ÏºÄÏù¥Ìä∏', english: '', image: '' },
                { korean: 'Ïä§ÏºÄÏù¥Ìä∏Î≥¥Îìú', english: '', image: '' },
                { korean: 'ÏÜåÎ∞©Ï∞®', english: '', image: '' },
                { korean: 'Íµ¨Í∏âÏ∞®', english: '', image: '' }
            ]
        };

        let currentCategory = '';
        let currentSlide = 0;
        let isPlaying = true;
        let slideInterval;
        let currentData = [];

        // DOM ÏöîÏÜåÎì§
        const menuScreen = document.getElementById('menuScreen');
        const slideshowScreen = document.getElementById('slideshowScreen');
        const slidesContainer = document.getElementById('slidesContainer');
        const progressBar = document.getElementById('progressBar');
        const slideCounter = document.getElementById('slideCounter');
        const backBtn = document.getElementById('backBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const playPauseBtn = document.getElementById('playPauseBtn');

        // ÌÖçÏä§Ìä∏Î•º ÏùåÏÑ±ÏúºÎ°ú ÏùΩÏñ¥Ï£ºÎäî Ìï®Ïàò
        function speakText(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel(); // Ïù¥Ï†Ñ ÏùåÏÑ± Ï§ëÎã®
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                speechSynthesis.speak(utterance);
            }
        }

        // Ïä¨ÎùºÏù¥Îìú ÏÉùÏÑ±
        function createSlides(data) {
            slidesContainer.innerHTML = '';
            data.forEach((item, index) => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                if (index === 0) slide.classList.add('active');
                
                slide.innerHTML = `
                    <img src="${item.image}" alt="${item.korean}" class="slide-image" loading="lazy">
                    <div class="slide-text">${item.korean}</div>
                    <div class="slide-english">${item.english}</div>
                `;
                
                slidesContainer.appendChild(slide);
            });
        }

        // Ïä¨ÎùºÏù¥Îìú ÌëúÏãú
        function showSlide(index) {
            const slides = document.querySelectorAll('.slide');
            slides.forEach(slide => slide.classList.remove('active'));
            
            if (slides[index]) {
                slides[index].classList.add('active');
                speakText(currentData[index].korean);
                updateProgress();
                updateCounter();
            }
        }

        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress() {
            const progress = ((currentSlide + 1) / currentData.length) * 100;
            progressBar.style.width = progress + '%';
        }

        // Ïπ¥Ïö¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
        function updateCounter() {
            slideCounter.textContent = `${currentSlide + 1} / ${currentData.length}`;
        }

        // Îã§Ïùå Ïä¨ÎùºÏù¥Îìú
        function nextSlide() {
            currentSlide = (currentSlide + 1) % currentData.length;
            showSlide(currentSlide);
        }

        // Ïù¥Ï†Ñ Ïä¨ÎùºÏù¥Îìú
        function prevSlide() {
            currentSlide = (currentSlide - 1 + currentData.length) % currentData.length;
            showSlide(currentSlide);
        }

        // ÏûêÎèô Ïû¨ÏÉù ÏãúÏûë
        function startAutoPlay() {
            if (slideInterval) clearInterval(slideInterval);
            slideInterval = setInterval(nextSlide, 3000);
            isPlaying = true;
            playPauseBtn.textContent = '‚è∏';
        }

        // ÏûêÎèô Ïû¨ÏÉù Ï†ïÏßÄ
        function stopAutoPlay() {
            if (slideInterval) clearInterval(slideInterval);
            isPlaying = false;
            playPauseBtn.textContent = '‚ñ∂';
        }

        // Ïû¨ÏÉù/ÏùºÏãúÏ†ïÏßÄ ÌÜ†Í∏Ä
        function togglePlayPause() {
            if (isPlaying) {
                stopAutoPlay();
            } else {
                startAutoPlay();
            }
        }

        // Ïä¨ÎùºÏù¥ÎìúÏáº ÏãúÏûë
        function startSlideshow(category) {
            currentCategory = category;
            currentData = [...cardData[category]];
            currentSlide = 0;
            
            // Îç∞Ïù¥ÌÑ∞Í∞Ä 15Í∞úÎ∞ñÏóê ÏóÜÏúºÎØÄÎ°ú 50Í∞úÎ°ú ÌôïÏû• (Ïã§Ï†úÎ°úÎäî 50Í∞ú Îç∞Ïù¥ÌÑ∞ Ï§ÄÎπÑ ÌïÑÏöî)
            while (currentData.length < 50) {
                currentData = currentData.concat(cardData[category]);
            }
            currentData = currentData.slice(0, 50);
            
            createSlides(currentData);
            menuScreen.style.display = 'none';
            slideshowScreen.style.display = 'block';
            
            showSlide(0);
            startAutoPlay();
        }

        // Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        function goToMenu() {
            stopAutoPlay();
            speechSynthesis.cancel();
            slideshowScreen.style.display = 'none';
            menuScreen.style.display = 'flex';
        }

        // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', () => {
                const category = card.dataset.category;
                startSlideshow(category);
            });
        });

        backBtn.addEventListener('click', goToMenu);
        prevBtn.addEventListener('click', prevSlide);
        nextBtn.addEventListener('click', nextSlide);
        playPauseBtn.addEventListener('click', togglePlayPause);

        // ÌÇ§Î≥¥Îìú Ïù¥Î≤§Ìä∏
        document.addEventListener('keydown', (e) => {
            if (slideshowScreen.style.display === 'block') {
                switch(e.code) {
                    case 'ArrowLeft':
                        prevSlide();
                        break;
                    case 'ArrowRight':
                        nextSlide();
                        break;
                    case 'Space':
                        e.preventDefault();
                        togglePlayPause();
                        break;
                    case 'Escape':
                        goToMenu();
                        break;
                }
            }
        });

        // ÌÑ∞Ïπò Ï†úÏä§Ï≤ò (Ïä§ÏôÄÏù¥ÌîÑ)
        let touchStartX = 0;
        let touchEndX = 0;

        slideshowScreen.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        slideshowScreen.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            // ... (Ïä§ÏôÄÏù¥ÌîÑ Ï≤òÎ¶¨ ÏΩîÎìúÍ∞Ä ÌïÑÏöîÌïòÎã§Î©¥ Ï∂îÍ∞Ä)
        }

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js');
        }
    </script>
</body>
</html>
